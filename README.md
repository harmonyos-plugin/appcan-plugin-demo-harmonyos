# uexDemo ç¤ºä¾‹æ’ä»¶

## ğŸ“– é¡¹ç›®ç®€ä»‹

uexDemoæ˜¯AppCanæ’ä»¶å¼€å‘çš„ç¤ºä¾‹é¡¹ç›®ï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨HarmonyOSå¹³å°ä¸Šå¼€å‘AppCanæ’ä»¶ã€‚è¯¥æ’ä»¶åŒ…å«äº†æ’ä»¶å¼€å‘çš„åŸºæœ¬åŠŸèƒ½å’Œæœ€ä½³å®è·µï¼Œæ˜¯å¼€å‘è€…å­¦ä¹ AppCanæ’ä»¶å¼€å‘çš„ç†æƒ³èµ·ç‚¹ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é›†æˆæ–¹æ³•

1. å°†uexDemoæ¨¡å—æ·»åŠ åˆ°AppCanå¼•æ“å·¥ç¨‹çš„pluginsç›®å½•ä¸‹ã€‚
2. åœ¨entryæ¨¡å—çš„oh-package.json5çš„dependenciesä¸­æ·»åŠ `"@appcan/uexDemo": "file:../plugins/uexDemo"`ã€‚
3. åœ¨entryæ¨¡å—çš„src/main/resources/base/profile/appcan_extend_plugins.jsonä¸­æ³¨å†Œæ’ä»¶æ–¹æ³•ï¼ˆæ’ä»¶æ³¨å†Œé…ç½®å†…å®¹æŸ¥çœ‹æ’ä»¶å·¥ç¨‹ç›®å½•ä¸‹/uexDemo/plugin.jsonï¼‰ã€‚
4. åœ¨entryæ¨¡å—çš„src/main/ets/AppCanExPluginProvider.etsä¸­å¯¼å…¥EUExDemoå¹¶æ³¨å†Œæ’ä»¶å®ä¾‹ã€‚

### åŠŸèƒ½ç‰¹æ€§

- âœ… **åŸºç¡€æ¥å£ç¤ºä¾‹**: å±•ç¤ºæ’ä»¶ä¸å‰ç«¯JSçš„æ•°æ®äº¤äº’æ–¹å¼
- âœ… **é¡µé¢è·³è½¬**: æ¼”ç¤ºå¦‚ä½•åœ¨æ’ä»¶ä¸­æ‰“å¼€åŸç”Ÿé¡µé¢
- âœ… **æ–‡ä»¶æ“ä½œ**: å±•ç¤ºAppCanæ–‡ä»¶åè®®çš„ä½¿ç”¨æ–¹æ³•
- âœ… **å›è°ƒæœºåˆ¶**: æ¼”ç¤ºåŒæ­¥å›è°ƒã€å¼‚æ­¥å›è°ƒå’Œå‘½åå›è°ƒçš„ä½¿ç”¨
- âœ… **å‚æ•°å¤„ç†**: å±•ç¤ºå¦‚ä½•å¤„ç†å‰ç«¯ä¼ å…¥çš„å„ç§ç±»å‹å‚æ•°
- âœ… **æ—¥å¿—è®°å½•**: æ¼”ç¤ºæ’ä»¶å¼€å‘ä¸­çš„æ—¥å¿—è®°å½•æœ€ä½³å®è·µ

### å¼€å‘çŠ¶æ€

- ğŸ¯ **åŸºç¡€åŠŸèƒ½**: âœ… å·²å®Œæˆ - æ ¸å¿ƒç¤ºä¾‹åŠŸèƒ½ (3/3ä¸ªæ¥å£å®Œæˆ)
- ğŸ“š **æ–‡æ¡£ç¤ºä¾‹**: âœ… å·²å®Œæˆ - å®Œæ•´çš„å¼€å‘ç¤ºä¾‹å’Œè¯´æ˜

**å½“å‰å®Œæˆåº¦**: 100% | **åŠŸèƒ½**: å®Œæ•´çš„æ’ä»¶å¼€å‘ç¤ºä¾‹

## ğŸ“š APIæ¥å£

### æ ¸å¿ƒæ¥å£

| æ¥å£åç§° | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›å€¼ |
|---------|---------|---------|--------|
| `testFirstInterface` | åŸºç¡€æ¥å£ç¤ºä¾‹ | string, number, object, function | string |
| `openMainPage` | æ‰“å¼€æ’ä»¶é¡µé¢ | æ—  | void |
| `testHandleFileProtocolPath` | æ–‡ä»¶åè®®ç¤ºä¾‹ | æ—  | void |

### æ¥å£è¯¦æƒ…

#### testFirstInterface
```javascript
// è°ƒç”¨ç¤ºä¾‹
const result = uexDemo.testFirstInterface('abc', 123, {bbb: 'ccc'}, (data, extraInfo) => {
    console.log('å›è°ƒæ•°æ®:', data, extraInfo);
});
console.log('åŒæ­¥è¿”å›:', result);
```

**åŠŸèƒ½**: æ¼”ç¤ºæ’ä»¶æ¥å£çš„åŸºæœ¬ç”¨æ³•ï¼ŒåŒ…æ‹¬å‚æ•°ä¼ é€’ã€åŒæ­¥è¿”å›ã€å¼‚æ­¥å›è°ƒå’Œå‘½åå›è°ƒã€‚

**å‚æ•°**:
- `param1` (string): å­—ç¬¦ä¸²å‚æ•°ç¤ºä¾‹
- `param2` (number): æ•°å­—å‚æ•°ç¤ºä¾‹  
- `param3` (object): å¯¹è±¡å‚æ•°ç¤ºä¾‹
- `param4` (function): å›è°ƒå‡½æ•°å‚æ•°ç¤ºä¾‹

**è¿”å›å€¼**: 
- åŒæ­¥è¿”å›å­—ç¬¦ä¸²ç»“æœ
- å¼‚æ­¥å›è°ƒä¼ é€’å¤„ç†ç»“æœ
- å‘½åå›è°ƒ `uexDemo.onFinishFirstInterface`

#### openMainPage
```javascript
// è°ƒç”¨ç¤ºä¾‹
uexDemo.openMainPage();
```

**åŠŸèƒ½**: æ‰“å¼€æ’ä»¶å†…ç½®çš„åŸç”Ÿé¡µé¢ï¼Œæ¼”ç¤ºé¡µé¢è·³è½¬åŠŸèƒ½ã€‚

#### testHandleFileProtocolPath
```javascript
// è°ƒç”¨ç¤ºä¾‹
uexDemo.testHandleFileProtocolPath();
```

**åŠŸèƒ½**: æ¼”ç¤ºAppCanæ–‡ä»¶åè®®çš„ä½¿ç”¨ï¼ŒåŒ…æ‹¬res://å’Œwgt://åè®®çš„è·¯å¾„è½¬æ¢å’Œæ–‡ä»¶æ“ä½œã€‚

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
plugins/uexDemo/
â”œâ”€â”€ src/main/ets/           # æ’ä»¶æºä»£ç 
â”‚   â”œâ”€â”€ EUExDemo.ets       # æ’ä»¶å…¥å£ç±»
â”‚   â”œâ”€â”€ components/        # åŸç”Ÿé¡µé¢ç»„ä»¶
â”‚   â”‚   â””â”€â”€ MainPage.ets   # ç¤ºä¾‹é¡µé¢
â”‚   â””â”€â”€ vo/                # æ•°æ®æ¨¡å‹
â”‚       â””â”€â”€ CallbackDataVO.ets # å›è°ƒæ•°æ®æ¨¡å‹
â”œâ”€â”€ uexDemo/               # æ’ä»¶é…ç½®
â”‚   â”œâ”€â”€ plugin.json        # æ’ä»¶å…ƒæ•°æ®
â”‚   â””â”€â”€ info.xml           # æ’ä»¶ä¿¡æ¯
â”œâ”€â”€ oh-package.json5       # ä¾èµ–é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

### æ ¸å¿ƒç»„ä»¶

#### ğŸ¯ å…¥å£å±‚
- **EUExDemo**: æ’ä»¶å…¥å£ç±»ï¼Œç»§æ‰¿EUExBaseï¼Œå®ç°æ‰€æœ‰å¯¹å¤–APIæ¥å£

#### ğŸ–¥ï¸ é¡µé¢å±‚  
- **MainPage**: ç¤ºä¾‹åŸç”Ÿé¡µé¢ï¼Œæ¼”ç¤ºæ’ä»¶å†…é¡µé¢å¼€å‘

#### ğŸ“¦ æ•°æ®æ¨¡å‹å±‚
- **FirstInterfaceCBO**: å›è°ƒæ•°æ®æ¨¡å‹ï¼Œå®šä¹‰æ¥å£å›è°ƒçš„æ•°æ®ç»“æ„

### å¼€å‘è¦ç‚¹

#### 1. æ’ä»¶å…¥å£ç±»å¼€å‘
```typescript
export default class EUExDemo extends EUExBase {
  // ç»§æ‰¿EUExBaseï¼Œå®ç°æ’ä»¶åŸºç¡€åŠŸèƒ½
  
  public testFirstInterface(...params: object[]): string {
    // å®ç°å…·ä½“ä¸šåŠ¡é€»è¾‘
    // æ”¯æŒåŒæ­¥è¿”å›å’Œå¼‚æ­¥å›è°ƒ
  }
  
  protected clean(): boolean {
    // å®ç°èµ„æºæ¸…ç†é€»è¾‘
    return false;
  }
}
```

#### 2. å›è°ƒæœºåˆ¶ä½¿ç”¨
```typescript
// åŒ¿åå‡½æ•°å›è°ƒ
this.callbackJsFunction(cbFunc, cbData, "extra info");

// å‘½åæ–¹æ³•å›è°ƒ  
this.callbackJsObject(this.CALLBACK_NAME, cbData);

// åŒæ­¥è¿”å›
return "result data";
```

#### 3. æ–‡ä»¶åè®®å¤„ç†
```typescript
// åè®®è·¯å¾„è½¬æ¢
const realPath = BUtility.makeRealPath(protocolPath, this.mBrwView);

// æ–‡ä»¶æ“ä½œ
fs.copyFile(sourcePath, targetPath);
```

#### 4. é¡µé¢è·³è½¬
```typescript
// å¯¼å…¥é¡µé¢ç»„ä»¶
import('./components/MainPage');

// è·¯ç”±è·³è½¬
router.pushNamedRoute({name: 'pageName'});
```

### é…ç½®æ–‡ä»¶

#### plugin.json
```json
{
  "plugins": [
    {
      "uexName": "uexDemo",
      "methods": [
        "testFirstInterface",
        "openMainPage", 
        "testHandleFileProtocolPath"
      ]
    }
  ]
}
```

#### info.xml
```xml
<?xml version="1.0" encoding="utf-8"?>
<uexplugins>
    <plugin uexName="uexDemo" version="1.0.0" build="2024072301">
        <info>0:ç¤ºä¾‹æ’ä»¶æ”¹åŠ¨</info>
        <build>0:AppCanç¤ºä¾‹æ’ä»¶</build>
    </plugin>
</uexplugins>
```

### æµ‹è¯•é¡µé¢

æ’ä»¶æä¾›äº†å®Œæ•´çš„æµ‹è¯•é¡µé¢ `entry/src/main/resources/resfile/widget/uexDemo/uexDemo.html`ï¼ŒåŒ…å«ï¼š

- ğŸ§ª **æ¥å£æµ‹è¯•**: æµ‹è¯•æ‰€æœ‰APIæ¥å£åŠŸèƒ½
- ğŸ“ **æ—¥å¿—è¾“å‡º**: å®æ—¶æ˜¾ç¤ºæ¥å£è°ƒç”¨ç»“æœ
- ğŸ¯ **äº¤äº’ç¤ºä¾‹**: æ¼”ç¤ºå„ç§å‚æ•°ä¼ é€’å’Œå›è°ƒæ–¹å¼

### å¼€å‘ç¯å¢ƒ

- **å¹³å°**: HarmonyOS NEXT
- **è¯­è¨€**: ArkTS (TypeScript)  
- **æ¡†æ¶**: AppCan Engine
- **æ„å»º**: DevEco Studio

## ğŸ“– å­¦ä¹ æŒ‡å—

### é€‚ç”¨äººç¾¤

- AppCanæ’ä»¶å¼€å‘åˆå­¦è€…
- HarmonyOSåº”ç”¨å¼€å‘è€…
- éœ€è¦äº†è§£AppCanæ’ä»¶æœºåˆ¶çš„å¼€å‘è€…

### å­¦ä¹ è·¯å¾„

1. **åŸºç¡€æ¦‚å¿µ**: äº†è§£AppCanæ’ä»¶æ¶æ„å’Œå¼€å‘æµç¨‹
2. **ç¯å¢ƒæ­å»º**: é…ç½®HarmonyOSå¼€å‘ç¯å¢ƒå’ŒAppCanå¼•æ“
3. **ä»£ç å­¦ä¹ **: ç ”ç©¶uexDemoæºç ï¼Œç†è§£æ’ä»¶å¼€å‘æ¨¡å¼
4. **å®è·µå¼€å‘**: åŸºäºç¤ºä¾‹ä»£ç å¼€å‘è‡ªå·±çš„æ’ä»¶åŠŸèƒ½
5. **æµ‹è¯•éªŒè¯**: ä½¿ç”¨æµ‹è¯•é¡µé¢éªŒè¯æ’ä»¶åŠŸèƒ½

### å…³é”®çŸ¥è¯†ç‚¹

- **æ’ä»¶ç”Ÿå‘½å‘¨æœŸ**: æ’ä»¶çš„åˆå§‹åŒ–ã€è°ƒç”¨å’Œæ¸…ç†è¿‡ç¨‹
- **æ•°æ®äº¤äº’**: å‰ç«¯JSä¸åŸç”Ÿä»£ç çš„æ•°æ®ä¼ é€’æœºåˆ¶
- **å›è°ƒæ¨¡å¼**: åŒæ­¥å›è°ƒã€å¼‚æ­¥å›è°ƒå’Œå‘½åå›è°ƒçš„ä½¿ç”¨åœºæ™¯
- **æ–‡ä»¶ç³»ç»Ÿ**: AppCanæ–‡ä»¶åè®®å’Œè·¯å¾„å¤„ç†æ–¹å¼
- **é¡µé¢ç®¡ç†**: åŸç”Ÿé¡µé¢çš„åˆ›å»ºå’Œè·³è½¬æ–¹æ³•

## ğŸ”— ç›¸å…³é“¾æ¥

- [AppCanå®˜ç½‘](https://www.appcan.cn/)
- [AppCanæ’ä»¶å¼€å‘æ–‡æ¡£](https://newdocx.appcan.cn/)
- [HarmonyOSå¼€å‘æ–‡æ¡£](https://developer.huawei.com/consumer/cn/harmonyos/)
- [ArkTSè¯­è¨€å‚è€ƒ](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-syntax)

## ğŸ“‹ å¼€å‘è§„èŒƒ

### å‘½åè§„èŒƒ
- æ’ä»¶åç§°: uex + åŠŸèƒ½åç§° (å¦‚: uexDemo)
- å…¥å£ç±»å: EUEx + åŠŸèƒ½åç§° (å¦‚: EUExDemo)
- æ–¹æ³•å‘½å: é©¼å³°å‘½åæ³•ï¼Œè¯­ä¹‰æ¸…æ™°

### ä»£ç è§„èŒƒ
- ç»§æ‰¿EUExBaseåŸºç±»
- å®ç°clean()æ–¹æ³•è¿›è¡Œèµ„æºæ¸…ç†
- ä½¿ç”¨BDebugè¿›è¡Œæ—¥å¿—è®°å½•
- åˆç†ä½¿ç”¨å›è°ƒæœºåˆ¶
- éµå¾ªArkTSç¼–ç è§„èŒƒ

### æ–‡æ¡£è§„èŒƒ
- æä¾›å®Œæ•´çš„README.mdè¯´æ˜
- APIæ¥å£æ–‡æ¡£è¦è¯¦ç»†æ¸…æ™°
- åŒ…å«ä½¿ç”¨ç¤ºä¾‹å’Œæµ‹è¯•ç”¨ä¾‹
- è¯´æ˜æ’ä»¶çš„åŠŸèƒ½ç‰¹æ€§å’Œé€‚ç”¨åœºæ™¯

## ğŸ’¡ å¼€å‘æŠ€å·§

### å‚æ•°å¤„ç†æœ€ä½³å®è·µ
```typescript
// å¤„ç†å¯é€‰å‚æ•°
public someMethod(...params: object[]): void {
  const param1 = params[0] as string || '';
  const param2 = params[1] as number || 0;
  const callback = params[2] as Function;

  // å‚æ•°éªŒè¯
  if (!param1) {
    BDebug.error(this.LogTag, 'param1 is required');
    return;
  }
}
```

### é”™è¯¯å¤„ç†æ¨¡å¼
```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
try {
  // ä¸šåŠ¡é€»è¾‘
} catch (error) {
  BDebug.error(this.LogTag, 'method error:', error);
  // é”™è¯¯å›è°ƒ
  this.callbackJsFunction(callback, {
    status: -1,
    error: error.message
  });
}
```

### èµ„æºç®¡ç†
```typescript
// åœ¨cleanæ–¹æ³•ä¸­æ¸…ç†èµ„æº
protected clean(): boolean {
  // æ¸…ç†å®šæ—¶å™¨
  if (this.timer) {
    clearInterval(this.timer);
    this.timer = undefined;
  }

  // æ¸…ç†å›è°ƒå¼•ç”¨
  this.callbacks.clear();

  return true;
}
```

## ğŸš¨ å¸¸è§é—®é¢˜

### Q: æ’ä»¶æ¥å£è°ƒç”¨å¤±è´¥ï¼Ÿ
**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. plugin.jsonä¸­æ˜¯å¦æ­£ç¡®å£°æ˜äº†æ–¹æ³•å
2. appcan_extend_plugins.jsonä¸­æ˜¯å¦æ­£ç¡®æ³¨å†Œ
3. AppCanExPluginProvider.etsä¸­æ˜¯å¦æ­£ç¡®å®ä¾‹åŒ–
4. æ–¹æ³•ç­¾åæ˜¯å¦ä¸å£°æ˜ä¸€è‡´

### Q: å›è°ƒå‡½æ•°ä¸æ‰§è¡Œï¼Ÿ
**A**: ç¡®è®¤ï¼š
1. å›è°ƒå‡½æ•°å‚æ•°æ˜¯å¦æ­£ç¡®ä¼ é€’
2. ä½¿ç”¨æ­£ç¡®çš„å›è°ƒæ–¹æ³•ï¼ˆcallbackJsFunction vs callbackJsObjectï¼‰
3. å›è°ƒæ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®

### Q: æ–‡ä»¶è·¯å¾„è½¬æ¢å¤±è´¥ï¼Ÿ
**A**: æ³¨æ„ï¼š
1. ä½¿ç”¨BUtility.makeRealPathè¿›è¡Œè·¯å¾„è½¬æ¢
2. ç¡®ä¿æ–‡ä»¶åè®®æ ¼å¼æ­£ç¡®ï¼ˆres://, wgt://ç­‰ï¼‰
3. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨

### Q: é¡µé¢è·³è½¬ä¸æˆåŠŸï¼Ÿ
**A**: æ£€æŸ¥ï¼š
1. é¡µé¢ç»„ä»¶æ˜¯å¦æ­£ç¡®å¯¼å…¥
2. è·¯ç”±åç§°æ˜¯å¦æ­£ç¡®é…ç½®
3. é¡µé¢ç»„ä»¶æ˜¯å¦æ­£ç¡®å®ç°

## ğŸ“ˆ æ‰©å±•å»ºè®®

### åŠŸèƒ½æ‰©å±•æ–¹å‘
- æ·»åŠ æ›´å¤šæ–‡ä»¶æ“ä½œç¤ºä¾‹
- å¢åŠ ç½‘ç»œè¯·æ±‚ç¤ºä¾‹
- æ·»åŠ æ•°æ®åº“æ“ä½œç¤ºä¾‹
- å®ç°æ›´å¤æ‚çš„é¡µé¢äº¤äº’

### æ€§èƒ½ä¼˜åŒ–å»ºè®®
- åˆç†ä½¿ç”¨å¼‚æ­¥æ“ä½œ
- é¿å…å†…å­˜æ³„æ¼
- ä¼˜åŒ–å¤§æ•°æ®å¤„ç†
- å‡å°‘ä¸å¿…è¦çš„å›è°ƒ

---

ğŸ“§ å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒAppCanå®˜æ–¹æ–‡æ¡£æˆ–æäº¤Issueã€‚

> **æç¤º**: è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ’ä»¶å¼€å‘ç¤ºä¾‹ï¼Œå»ºè®®å¼€å‘è€…åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡ŒåŠŸèƒ½æ‰©å±•å’Œå®šåˆ¶åŒ–å¼€å‘ã€‚
